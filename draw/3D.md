#### 72 理解 meshgrid

要想掌握 3D 曲面图，需要首先理解 meshgrid 函数。

导入包：

```python
import numpy as np
import matplotlib.pyplot as plt
```

创建一维数组 x

```python
nx, ny = (5, 3)
x = np.linspace(0, 1, nx)
x
# 结果
# array([0.  , 0.25, 0.5 , 0.75, 1.  ])
```

创建一维数组 y

```python
y = np.linspace(0, 1, ny)
y 
# 结果
# array([0. , 0.5, 1. ])
```

使用 `meshgrid` 生成网格点：

```python
xv, yv = np.meshgrid(x, y)
xv
```

xv 结果：

```python
array([[0.  , 0.25, 0.5 , 0.75, 1.  ],
       [0.  , 0.25, 0.5 , 0.75, 1.  ],
       [0.  , 0.25, 0.5 , 0.75, 1.  ]])
```

yv 结果：

```python
array([[0. , 0. , 0. , 0. , 0. ],
       [0.5, 0.5, 0.5, 0.5, 0.5],
       [1. , 1. , 1. , 1. , 1. ]])
```

绘制网格点：

```python
plt.scatter(xv.flatten(),yv.flatten(),c='red')
plt.xticks(ticks=x)
plt.yticks(ticks=y)
```

![](https://imgkr.cn-bj.ufileos.com/3d65d784-5795-4592-a82f-c6e5b7975de8.png)

以上就是 meshgrid 功能：创建网格点，它是绘制 3D 曲面图的必用方法之一。



#### 73 绘制曲面图

导入 3D 绘图模块：

```python
from mpl_toolkits.mplot3d import Axes3D
```

生成X,Y,Z

```python
# X, Y 
x = np.arange(-5, 5, 0.25)
y = np.arange(-5, 5, 0.25)
X, Y = np.meshgrid(x, y)    # x-y 平面的网格
R = np.sqrt(X ** 2 + Y ** 2)
# Z
Z = np.sin(R)
```

绘制 3D 曲面图：

```python
fig = plt.figure()
ax = Axes3D(fig)
plt.xticks(ticks=np.arange(-5,6))
plt.yticks(ticks=np.arange(-5,6))
ax.plot_surface(X, Y, Z, cmap=plt.get_cmap('rainbow'))
plt.show()
```

![](https://imgkr.cn-bj.ufileos.com/ed7fb873-2074-4987-b8ac-460a0b5a52d8.png)

#### 74 等高线图

以上 3D 曲面图的在 xy平面、 xz平面、yz平面投影，即是等高线图。

xy 平面投影得到的等高线图：

```python
fig = plt.figure()
ax = Axes3D(fig)
plt.xticks(ticks=np.arange(-5,6))
plt.yticks(ticks=np.arange(-5,6))
ax.contourf(X, Y, Z, zdir='z', offset=-1, cmap=plt.get_cmap('rainbow'))
plt.show()
```

![](https://imgkr.cn-bj.ufileos.com/3dedd3b5-05da-416c-b0c3-182a0b0d32d1.png)